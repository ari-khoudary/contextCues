facet_grid(~ subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
f = filter(inference_df, subID==24)
View(f)
f = filter(inference_df, subID==25)
f = filter(inference_df, subID==24)
f = filter(inference_df, subID==26)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(tidyverse)
library(patchwork)
library(lme4)
library(lmerTest)
library(emmeans)
library(knitr)
# potentially useful in the future
library(performance) # for easy model comparisons
# library(jtools) # for alternative model summaries
library(sjPlot) # for formatting model result tables
# library(MetBrewer) # for pretty art-inspired color palettes
# get info about which staircase generated which coherence
staircase_df <- read.csv('../../data/tidied/staircases.csv') %>%
pivot_longer(cols = c(stair1, stair2), names_to = 'staircase') %>%
rename(coherence = value) %>%
mutate(coherence = round(coherence, 2))
# load calibrated coherences
calibrated_coherence <- read.csv('../../data/tidied/calibrated_coherence.csv') %>%
mutate(img1Coh = round(img1, 2),
img2Coh = round(img2, 2))
col_order <- c('subID', 'img1Path', 'img1Coh', 'img2Path', 'img2Coh')
calibrated_coherence <- calibrated_coherence[, col_order]
learning_files = list.files('../../data', full.names = TRUE, pattern='block1_learning.csv', recursive = T)
learning_keep_idx <- grep('excluded', learning_files, invert=T)
learning_df = do.call(rbind, lapply(learning_files[learning_keep_idx], function(x) { read.csv(x, header = TRUE)} ))
# transform RTs
learning_df <- learning_df %>%
group_by(subID) %>%
mutate(logRT = log(RT),
zlogRT = scale(logRT),
cueIdx = factor(cueIdx))
inference_keep_idx <- inference_keep_idx[1:14]
inference_keep_idx <- inference_keep_idx[1:14]
learning_files = list.files('../../data', full.names = TRUE, pattern='block1_learning.csv', recursive = T)
learning_keep_idx <- grep('excluded', learning_files, invert=T)
learning_keep_idx <- learning_keep_idx[1:14]
learning_df = do.call(rbind, lapply(learning_files[learning_keep_idx], function(x) { read.csv(x, header = TRUE)} ))
# transform RTs
learning_df <- learning_df %>%
group_by(subID) %>%
mutate(logRT = log(RT),
zlogRT = scale(logRT),
cueIdx = factor(cueIdx))
# plot group regressions
learning_df %>%
mutate(cueIdx = case_when(cueIdx=='1' ~ '80% A',
cueIdx=='2' ~ '80% B',
cueIdx=='3' ~ '50% A/B')) %>%
ggplot(aes(x=trial, y=zlogRT, color=cueIdx)) +
theme_bw() +
facet_wrap(~ cueIdx) +
geom_hline(yintercept = 0, linetype='dashed') +
geom_point(alpha=0.25, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
labs(title = 'group summary')
# plot group regressions
learning_df %>%
mutate(cueIdx = case_when(cueIdx=='1' ~ '80% A',
cueIdx=='2' ~ '80% B',
cueIdx=='3' ~ '50% A/B')) %>%
ggplot(aes(x=trial, y=zlogRT, color=cueIdx)) +
theme_bw() +
facet_wrap(~ cueIdx) +
geom_hline(yintercept = 0, linetype='dashed') +
geom_point(alpha=0.25, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
labs(title = 'group summary', subtitle = 'zlogRT ~ cueIdx + trial')
inference_files = list.files('../../data', full.names = TRUE, pattern='block1_inference.csv', recursive = T)
inference_keep_idx <- grep('excluded', inference_files, invert=T)
inference_df = do.call(rbind, lapply(inference_files[inference_keep_idx], function(x) { read.csv(x, header = TRUE)} ))
inference_df <- inference_df %>%
mutate(cueIdx = case_when(targetIdx==1 & congruent==1 ~ 1,
targetIdx==2 & congruent==1 ~ 2,
targetIdx==1 & congruent==0 ~ 2,
targetIdx==2 & congruent==0 ~ 1,
is.na(congruent) ~ 3),
cueLabel = factor(cueIdx, levels=c(3,1,2), labels=c('50%', '80%A', '80%B')))
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw()
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
geom_point()
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
geom_jitter()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_jitter()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_point()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_boxplot()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot()
inference_df %>%
#group_by(subID, cueLabel) %>%
#summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot() +
```
inference_df %>%
#group_by(subID, cueLabel) %>%
#summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_point()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_point() +
geom_smooth(method = 'lm', linewidth=1.5)
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot()
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot() +
labs(title = 'group summary', subtitle = 'propCorrect first computed within-subject')
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(~ subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(subID ~) +
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(~ subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID, ncol=1) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
RTs <- inference_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5)
RTs
# transform RTs
learning_df <- learning_df %>%
group_by(subID) %>%
mutate(logRT = log(RT),
zlogRT = scale(logRT),
cueIdx = factor(cueIdx),
cueLabel = case_when(cueIdx=='1' ~ '80% A',
cueIdx=='2' ~ '80% B',
cueIdx=='3' ~ '50% A/B'))
# plot group regressions
learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
facet_wrap(~ cueIdx) +
geom_hline(yintercept = 0, linetype='dashed') +
geom_point(alpha=0.25, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
labs(title = 'group summary', subtitle = 'zlogRT ~ cueIdx + trial')
# transform RTs
learning_df <- learning_df %>%
group_by(subID) %>%
mutate(logRT = log(RT),
zlogRT = scale(logRT),
cueIdx = factor(cueIdx),
cueLabel = case_when(cueIdx=='1' ~ '80% A',
cueIdx=='2' ~ '80% B',
cueIdx=='3' ~ '50% A/B'))
# plot group regressions
learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
facet_wrap(~ cueIdx) +
geom_hline(yintercept = 0, linetype='dashed') +
geom_point(alpha=0.25, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
labs(title = 'group summary', subtitle = 'zlogRT ~ cueIdx + trial')
# transform RTs
learning_df <- learning_df %>%
group_by(subID) %>%
mutate(logRT = log(RT),
zlogRT = scale(logRT),
cueLabel = factor(cueIdx, levels=c(3,1,2), labels=c('50% A/B', '80% A', '80% B')))
learning_df %>%
mutate(imageIdx = factor(imageIdx)) %>%
ggplot(aes(x=imageIdx, y=accuracy)) +
theme_bw() +
facet_grid(~ subID) +
stat_summary(fun='mean', geom='point', size=3) +
geom_hline(yintercept = 0.8, linetype='dashed') +
scale_y_continuous(n.breaks=6) +
theme(text = element_text(size=14))
# plot group regressions
learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
facet_wrap(~ cueIdx) +
geom_hline(yintercept = 0, linetype='dashed') +
geom_point(alpha=0.25, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
labs(title = 'group summary', subtitle = 'zlogRT ~ cueIdx + trial')
# plot group regressions
learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
facet_wrap(~ cueLabel) +
geom_hline(yintercept = 0, linetype='dashed') +
geom_point(alpha=0.25, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
labs(title = 'group summary', subtitle = 'zlogRT ~ cueIdx + trial')
inference_df %>%
group_by(subID, cueLabel) %>%
summarise(propCorrect = mean(accuracy, na.rm=T)) %>%
ggplot(aes(x=cueLabel, y=propCorrect, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept = 0.5, linetype='dashed') +
geom_boxplot() +
labs(title = 'group summary', subtitle = 'propCorrect first computed within-subject')
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_wrap(cueLabel ~ subID)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_wrap(cueLabel ~ subID, ncol=3)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(cueLabel ~ subID)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(cueLabel ~ subID) +
scale_x_continuous(n.breaks=3)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(cueLabel ~ subID) +
scale_x_continuous(breaks = c(1, 30, 60))
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(cueLabel ~ subID) +
scale_x_continuous(breaks = c(1, 75))
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(cueLabel ~ subID) +
scale_x_continuous(n.breaks=3)
RTs
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(cueLabel ~ subID) +
scale_x_continuous(n.breaks=4)
RTs
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID, ncol=1) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(subID ~ cueLabel) +
scale_x_continuous(n.breaks=4)
RTs
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID, ncol=1) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
accuracy <- inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID, ncol=1) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
accuracy + RTs
accuracy + RTs + plot_layout(guides = 'collect')
RTs <- learning_df %>%
ggplot(aes(x=trial, y=zlogRT, color=cueLabel)) +
theme_bw() +
geom_hline(yintercept=0, linetype='dashed') +
geom_point(alpha=0.5, size=1) +
geom_smooth(method = 'lm', linewidth=1.5) +
facet_grid(subID ~ cueLabel) +
scale_x_continuous(n.breaks=4) +
labs(title = 'RTs over learning')
accuracy <- inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID, ncol=1) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=10)
accuracy + RTs + plot_layout(guides = 'collect')
accuracy <- inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_wrap(~ subID, ncol=1) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=5)
accuracy + RTs + plot_layout(guides = 'collect')
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(~ subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=5)
?facet_grid
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(rows=subID) +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=5)
inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(rows='subID') +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=5)
accuracy <- inference_df %>%
ggplot(aes(x=cueLabel, y=accuracy, color=cueLabel)) +
theme_bw() +
facet_grid(rows='subID') +
geom_hline(yintercept = 0.5, linetype='dashed') +
stat_summary(fun.data='mean_se', geom='pointrange') +
labs(y = 'proportion correct', title = 'inference accuracy') +
scale_y_continuous(n.breaks=5)
accuracy + RTs + plot_layout(guides = 'collect')
accuracy + RTs + plot_layout(guides = 'collect', widths=c(1,1.5))
accuracy + RTs + plot_layout(guides = 'collect', widths=c(0.5, 1))
psq <- read.csv('../../data/tidied/subjective_probabilities.csv')
f <- left_join(inference_df, psq)
View(f)
f <- left_join(psq, inference_df)
View(f)
f <- merge(psq, inference_df)
sub12 <- inference_df %>% filter(subID==12)
View(sub12)
unique(sub12$cue_rgb)
psq <- read.csv('../../data/tidied/subjective_probabilities.csv')
sub12 <- inference_df %>% filter(subID==12)
unique(sub12$cue_rgb)
unique(sub12$cue_string)
unique(psq$cue_string)
unique(sub12$cue_string) %>% trimws()
inference_df <- inference_df %>%
mutate(cueIdx = case_when(targetIdx==1 & congruent==1 ~ 1,
targetIdx==2 & congruent==1 ~ 2,
targetIdx==1 & congruent==0 ~ 2,
targetIdx==2 & congruent==0 ~ 1,
is.na(congruent) ~ 3),
cueLabel = factor(cueIdx, levels=c(3,1,2), labels=c('50% A/B', '80%A', '80%B')),
cue_string = trimws(cue_string))
f <- left_join(inference_df, psq)
View(f)
View(inference_df)
View(psq)
